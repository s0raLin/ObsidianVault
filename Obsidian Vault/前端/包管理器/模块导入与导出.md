模块的作用是，把代码拆分成只负责一件事情的函数或类，然后再其他函数和类中复用它们

## 导入模块
把其他JS文件中的代码引入到当前文件
`require()` 函数
在CommonJS规范中，可以使用`require()`将模块导入主文件中

```js
// index.js
const url = require('node:url');
console.log(url.parse("https://google.com"));
```
这里传入的是 Node.js 的内置模块 `url`

### 导入自定义模块

```js
~/project
 ├─ dogBark.js
 └─ index.js
```

#### 导出模块(dogBark.js)
```js
// dogBark.js
module.exports = function dogBark() {
  return 'Bark! Bark!';
};
```
#### 导入并使用模块（index.js）
```js
const dogBark = require('./dogBark.js');
console.log(dogBark());
```
模块名通常建议和文件名保持一致，便于理解


## 导出模块

在 CommonJS 中，**任何你想导出的内容，都必须放到 `module.exports = {}` 中**
### 导出函数

```js
module.exports = function divider(x, y) {
  return Math.ceil(x / y);
};
```

### 导出对象

```js
module.exports = {
  name: 'Roberto',
  position: 'Space engineer',
};
```
### 导出字符串或数字
```js
module.exports = 'Hello';
module.exports = 3;
```

### 导出类的实例

```js
class Cat { 
  name = 'Larry'; 
}
module.exports = new Cat();
```


## 示例: 导出一个Owl类模块


### owl.js
```js
module.exports = new class Owl {
  type = 'Bird';
  voice = 'Owoo';
  name = 'Hedwig';

  whoIs() {
    return this.type;
  }

  getVoice() {
    return this.voice;
  }

  getName() {
    return `My name is ${this.name}`;
  }
};
```

### index.js
```js
const Owl = require('./owl');

console.log('Information about owl: ', Owl);
console.log('Who is owl: ', Owl.whoIs());
console.log('What owl says: ', Owl.getVoice());
console.log('What is your name, Owl: ', Owl.getName());
```

module.exports 的快捷用法

```js
module.exports.catName = 'Larry';
```
等价于导出:
```js
{ catName: 'Larry' }
```

## 其他文件扩展名

CommonJS 模块支持多种文件类型：

- `.js` —— JavaScript 文件
- `.cjs` —— CommonJS 模块
- `.json` —— JSON 文件
- `.mjs` —— ECMAScript 模块（ESM）
    

### require() 支持的类型

- ✅ `.js`
- ✅ `.cjs`
- ✅ `.json`
- ❌ `.mjs`（需要使用 `import`）

### 示例

```js
// index.js
const parrot = require('./parrot.cjs');
const cat = require('./cat.json');
const tiger = require('./tiger.js');

console.log([parrot, cat, tiger]);
```

---

## package.json 中的模块类型

```js
{
  "name": "commonjs-modules-lession",
  "version": "1.0.0",
  "main": "index.js",
  "type": "commonjs",
  "scripts": {
    "test": "node index.js"
  }
}
```

说明：

- `"type": "commonjs"` → 使用 `require()`
- `"type": "module"` → 使用 `import`
- **一个项目只能选一种模块系统**

⚠️ 安装 npm 包时要注意：  
如果你的项目是 CommonJS，确保该包支持 `require()`。

---

## module 对象

在模块内部，可以访问 `module` 对象，获取模块信息。
### 示例
```js
// parrot.cjs
module.exports = {
  name: 'Garry',
  color: 'green',
  age: 2
};

console.log(module.parent);    // 使用当前模块的父模块
console.log(module.children);  // 当前模块的子模块（此处为空数组）
console.log(module.filename);  // 当前模块的完整文件名
console.log(module.path);      // 当前模块所在目录路径
```